<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.12: http://docutils.sourceforge.net/" />
<title>CLAP (CLever Audio Plugin)</title>
<style type="text/css">

.document {
    width: 755px;
}

.title {
    text-align: center;
}

.subtitle {
    text-align: center;
}

.reference, .toc-backref {
    text-decoration: none;
    color: #942;
}

.reference:hover, .toc-backref:hover {
    color: #294;
}

tt.docutils {
    color: #237;
    font-size: 100%;
}

</style>
<style type="text/css">

.code .hll { background-color: #49483e }
.code  { background: #272822; color: #f8f8f2 }
.code .c { color: #75715e } /* Comment */
.code .err { color: #960050; background-color: #1e0010 } /* Error */
.code .k { color: #66d9ef } /* Keyword */
.code .l { color: #ae81ff } /* Literal */
.code .n { color: #f8f8f2 } /* Name */
.code .o { color: #f92672 } /* Operator */
.code .p { color: #f8f8f2 } /* Punctuation */
.code .cm { color: #A56E27 } /* Comment.Multiline */
.code .cp { color: #B5A869 } /* Comment.Preproc */
.code .c1 { color: #A56E27 } /* Comment.Single */
.code .cs { color: #A56E27 } /* Comment.Special */
.code .ge { font-style: italic } /* Generic.Emph */
.code .gs { font-weight: bold } /* Generic.Strong */
.code .kc { color: #66d9ef } /* Keyword.Constant */
.code .kd { color: #66d9ef } /* Keyword.Declaration */
.code .kn { color: #f92672 } /* Keyword.Namespace */
.code .kp { color: #66d9ef } /* Keyword.Pseudo */
.code .kr { color: #66d9ef } /* Keyword.Reserved */
.code .kt { color: #66d9ef } /* Keyword.Type */
.code .ld { color: #e6db74 } /* Literal.Date */
.code .m { color: #ae81ff } /* Literal.Number */
.code .s { color: #e6db74 } /* Literal.String */
.code .na { color: #a6e22e } /* Name.Attribute */
.code .nb { color: #f8f8f2 } /* Name.Builtin */
.code .nc { color: #a6e22e } /* Name.Class */
.code .no { color: #66d9ef } /* Name.Constant */
.code .nd { color: #a6e22e } /* Name.Decorator */
.code .ni { color: #f8f8f2 } /* Name.Entity */
.code .ne { color: #a6e22e } /* Name.Exception */
.code .nf { color: #a6e22e } /* Name.Function */
.code .nl { color: #f8f8f2 } /* Name.Label */
.code .nn { color: #f8f8f2 } /* Name.Namespace */
.code .nx { color: #a6e22e } /* Name.Other */
.code .py { color: #f8f8f2 } /* Name.Property */
.code .nt { color: #f92672 } /* Name.Tag */
.code .nv { color: #f8f8f2 } /* Name.Variable */
.code .ow { color: #f92672 } /* Operator.Word */
.code .w { color: #f8f8f2 } /* Text.Whitespace */
.code .mf { color: #ae81ff } /* Literal.Number.Float */
.code .mh { color: #ae81ff } /* Literal.Number.Hex */
.code .mi { color: #ae81ff } /* Literal.Number.Integer */
.code .mo { color: #ae81ff } /* Literal.Number.Oct */
.code .sb { color: #e6db74 } /* Literal.String.Backtick */
.code .sc { color: #e6db74 } /* Literal.String.Char */
.code .sd { color: #e6db74 } /* Literal.String.Doc */
.code .s2 { color: #e6db74 } /* Literal.String.Double */
.code .se { color: #ae81ff } /* Literal.String.Escape */
.code .sh { color: #e6db74 } /* Literal.String.Heredoc */
.code .si { color: #e6db74 } /* Literal.String.Interpol */
.code .sx { color: #e6db74 } /* Literal.String.Other */
.code .sr { color: #e6db74 } /* Literal.String.Regex */
.code .s1 { color: #e6db74 } /* Literal.String.Single */
.code .ss { color: #e6db74 } /* Literal.String.Symbol */
.code .bp { color: #f8f8f2 } /* Name.Builtin.Pseudo */
.code .vc { color: #f8f8f2 } /* Name.Variable.Class */
.code .vg { color: #f8f8f2 } /* Name.Variable.Global */
.code .vi { color: #f8f8f2 } /* Name.Variable.Instance */
.code .il { color: #ae81ff } /* Literal.Number.Integer.Long */

</style>
</head>
<body>
<div class="document" id="clap-clever-audio-plugin">
<h1 class="title">CLAP (CLever Audio Plugin)</h1>
<h2 class="subtitle" id="a-free-audio-plugin-format">A free audio plugin format</h2>

<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#goals" id="id2">Goals</a></li>
<li><a class="reference internal" href="#specification" id="id3">Specification</a><ul>
<li><a class="reference internal" href="#how-to-read-the-specification" id="id4">How to read the specification</a></li>
<li><a class="reference internal" href="#encoding" id="id5">Encoding</a></li>
<li><a class="reference internal" href="#c-exceptions" id="id6">C++ exceptions</a></li>
<li><a class="reference internal" href="#multi-threading" id="id7">Multi-Threading</a></li>
<li><a class="reference internal" href="#plugins-location" id="id8">Plugins location</a><ul>
<li><a class="reference internal" href="#common" id="id9">Common</a></li>
<li><a class="reference internal" href="#linux" id="id10">Linux</a></li>
<li><a class="reference internal" href="#windows" id="id11">Windows</a></li>
<li><a class="reference internal" href="#mac" id="id12">Mac</a></li>
</ul>
</li>
<li><a class="reference internal" href="#instantiate-a-plugin" id="id13">Instantiate a plugin</a><ul>
<li><a class="reference internal" href="#release-a-plugin" id="id14">Release a plugin</a></li>
<li><a class="reference internal" href="#plugin-description" id="id15">Plugin description</a></li>
<li><a class="reference internal" href="#extension-system" id="id16">Extension system</a></li>
<li><a class="reference internal" href="#audio-ports-configuration" id="id17">Audio ports configuration</a><ul>
<li><a class="reference internal" href="#standard-channel-mappings" id="id18">Standard channel mappings</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#activation" id="id19">Activation</a></li>
<li><a class="reference internal" href="#processing" id="id20">Processing</a><ul>
<li><a class="reference internal" href="#audio-buffers" id="id21">Audio buffers</a></li>
<li><a class="reference internal" href="#events" id="id22">Events</a><ul>
<li><a class="reference internal" href="#notes" id="id23">Notes</a></li>
<li><a class="reference internal" href="#parameters" id="id24">Parameters</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id1" id="id25">Parameters</a><ul>
<li><a class="reference internal" href="#types" id="id26">Types</a></li>
<li><a class="reference internal" href="#scales" id="id27">Scales</a></li>
<li><a class="reference internal" href="#automation" id="id28">Automation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#graphical-user-interface" id="id29">Graphical User Interface</a><ul>
<li><a class="reference internal" href="#showing-the-gui" id="id30">Showing the GUI</a></li>
<li><a class="reference internal" href="#sending-events-to-the-host" id="id31">Sending events to the host</a></li>
<li><a class="reference internal" href="#hiding-the-gui" id="id32">Hiding the GUI</a></li>
<li><a class="reference internal" href="#embedding" id="id33">Embedding</a><ul>
<li><a class="reference internal" href="#example-on-windows" id="id34">Example on Windows</a></li>
<li><a class="reference internal" href="#resizing-the-window" id="id35">Resizing the window</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#presets" id="id36">Presets</a><ul>
<li><a class="reference internal" href="#list-plugin-s-presets" id="id37">List plugin's presets</a></li>
<li><a class="reference internal" href="#load-a-preset" id="id38">Load a preset</a></li>
</ul>
</li>
<li><a class="reference internal" href="#save-and-restore-plugin-s-state" id="id39">Save and restore plugin's state</a></li>
</ul>
</li>
<li><a class="reference internal" href="#references" id="id40">References</a><ul>
<li><a class="reference internal" href="#clap-clap-h" id="id41">clap/clap.h</a></li>
<li><a class="reference internal" href="#clap-ext-state-h" id="id42">clap/ext/state.h</a></li>
<li><a class="reference internal" href="#clap-ext-audio-ports-h" id="id43">clap/ext/audio-ports.h</a></li>
<li><a class="reference internal" href="#clap-ext-event-ports-h" id="id44">clap/ext/event-ports.h</a></li>
<li><a class="reference internal" href="#clap-ext-params-h" id="id45">clap/ext/params.h</a></li>
<li><a class="reference internal" href="#clap-ext-gui-h" id="id46">clap/ext/gui.h</a></li>
<li><a class="reference internal" href="#clap-ext-embed-h" id="id47">clap/ext/embed.h</a></li>
<li><a class="reference internal" href="#clap-ext-embed-win32-h" id="id48">clap/ext/embed-win32.h</a></li>
<li><a class="reference internal" href="#clap-ext-embed-x11-h" id="id49">clap/ext/embed-x11.h</a></li>
<li><a class="reference internal" href="#clap-ext-embed-cocoa-h" id="id50">clap/ext/embed-cocoa.h</a></li>
<li><a class="reference internal" href="#clap-ext-draft-locale-h" id="id51">clap/ext/draft/locale.h</a></li>
<li><a class="reference internal" href="#clap-ext-draft-presets-h" id="id52">clap/ext/draft/presets.h</a></li>
<li><a class="reference internal" href="#clap-ext-draft-drum-map-h" id="id53">clap/ext/draft/drum-map.h</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="goals">
<h1><a class="toc-backref" href="#id2">Goals</a></h1>
<ul class="simple">
<li>Make a free digital instrument and effect plugin interface</li>
<li>Be easy to understand and implement</li>
<li>Don't require alien technology, or masoshist design<ul>
<li>Based on C, not Objective-C or C++</li>
<li>No dependancy on external libraries</li>
<li>No serialization format</li>
<li>No C++ multiple inheritence</li>
<li>No macro obfuscation</li>
<li>No object file to compile in the SDK, CLAP is an interface only.</li>
<li>Simple resource management mechanism</li>
</ul>
</li>
<li>Designed to work on any operating system and processor architecture</li>
<li>Be event oriented</li>
<li>Be extensible</li>
<li>Be easy to bridge</li>
<li>More and more advanced modular systems are showing up, things should be dynamics<ul>
<li>dynamic ports</li>
<li>dynamic parameters</li>
</ul>
</li>
<li>Full MIDI access</li>
</ul>
</div>
<div class="section" id="specification">
<h1><a class="toc-backref" href="#id3">Specification</a></h1>
<div class="section" id="how-to-read-the-specification">
<h2><a class="toc-backref" href="#id4">How to read the specification</a></h2>
<p>The specification should be read along the reference headers.
<a class="reference external" href="https://free-audio.github.io/clap/">https://free-audio.github.io/clap/</a> gives a convinient splet
view for that.</p>
</div>
<div class="section" id="encoding">
<h2><a class="toc-backref" href="#id5">Encoding</a></h2>
<p>All the strings exchanged through the CLAP interface must be encoded
in valid UTF-8.</p>
</div>
<div class="section" id="c-exceptions">
<h2><a class="toc-backref" href="#id6">C++ exceptions</a></h2>
<p>A CLAP interface must not send exception.</p>
</div>
<div class="section" id="multi-threading">
<h2><a class="toc-backref" href="#id7">Multi-Threading</a></h2>
<p>Every function should have a specifier which tells you if it is thread safe,
and if it is not, from which thread it can be used then.</p>
<p>The design is pretty simple. Every thing which is closely related to the
audio processing, has to be realtime; <strong>so it can't block!</strong></p>
<p>Functions marked with <strong>[audio-thread]</strong>, can only be called from the audio
processing context and can not lock mutexes, or use any non deterministic
synchronization method. It is implicit that calling a <strong>[thread-safe]</strong>
might lead to wait on synchronization and is forbidden.</p>
<p>Then the other functions, shall be marked as <strong>[thread-safe]</strong>, which indicates
that it can be called from multiple threads concurrently.</p>
<p>Tips: while reading the headers, you can set your editor to highlight
<strong>[thread-safe]</strong> and <strong>[audio-thread]</strong>.</p>
</div>
<div class="section" id="plugins-location">
<h2><a class="toc-backref" href="#id8">Plugins location</a></h2>
<div class="section" id="common">
<h3><a class="toc-backref" href="#id9">Common</a></h3>
<ul class="simple">
<li>Directories should be scanned recursively.</li>
</ul>
</div>
<div class="section" id="linux">
<h3><a class="toc-backref" href="#id10">Linux</a></h3>
<ul class="simple">
<li>Plugins distributed with packages should be installed to: <tt class="docutils literal">/usr/lib/clap/</tt> or <tt class="docutils literal">/usr/local/lib/clap/</tt></li>
<li>Plugins installed in the user's home should be installed to: <tt class="docutils literal"><span class="pre">${HOME}/.clap/</span></tt></li>
</ul>
</div>
<div class="section" id="windows">
<h3><a class="toc-backref" href="#id11">Windows</a></h3>
<ul class="simple">
<li>Plugins should be installed to: <tt class="docutils literal"><span class="pre">C:\Program</span> Files\clap\</tt></li>
</ul>
</div>
<div class="section" id="mac">
<h3><a class="toc-backref" href="#id12">Mac</a></h3>
<p>TBD</p>
</div>
</div>
<div class="section" id="instantiate-a-plugin">
<h2><a class="toc-backref" href="#id13">Instantiate a plugin</a></h2>
<p>Plugin instantiation can be done in a few steps:</p>
<ul class="simple">
<li>load the dynamic library with <tt class="docutils literal">dlopen</tt> or symilar functions</li>
<li>find the symbol <tt class="docutils literal">clap_plugin_factory</tt></li>
<li>use the factory to:<ul>
<li>get the number of plugins available <tt class="docutils literal"><span class="pre">factory-&gt;get_plugin_count(...);</span></tt></li>
<li>create plugins by index to enumerate the collection <tt class="docutils literal"><span class="pre">factory-&gt;create_plugin_by_index(...);</span></tt></li>
<li>create plugins by identifier to create a specific one <tt class="docutils literal"><span class="pre">factory-&gt;create_plugin_by_id(...);</span></tt></li>
</ul>
</li>
</ul>
<div class="section" id="release-a-plugin">
<h3><a class="toc-backref" href="#id14">Release a plugin</a></h3>
<p>To release a plugin, call <tt class="docutils literal"><span class="pre">plugin-&gt;destroy(plugin);</span></tt>.</p>
</div>
<div class="section" id="plugin-description">
<h3><a class="toc-backref" href="#id15">Plugin description</a></h3>
<p><tt class="docutils literal">struct clap_plugin</tt> contains an interger <tt class="docutils literal">clap_version</tt> which
indicates which version of the clap interface has been used to build the plugin, and
a few methods. The attribute <tt class="docutils literal">clap_version</tt> must be initialized by the plugin with
<tt class="docutils literal">CLAP_PLUGIN_VERSION</tt>.</p>
<p>Then to get the plugin's name, you have to use
<tt class="docutils literal"><span class="pre">plugin-&gt;get_attribute(plugin,</span> CLAP_ATTR_NAME, <span class="pre">...);</span></tt>.</p>
<p>See <tt class="docutils literal">#include &lt;clap/clap.h&gt;</tt> for more information.</p>
</div>
<div class="section" id="extension-system">
<h3><a class="toc-backref" href="#id16">Extension system</a></h3>
<p>To extend clap's functionnality, there is a pretty simple mechanism:</p>
<pre class="code c literal-block">
<span class="c1">// query a plugin extension
</span><span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">plug_ext</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">-&gt;</span><span class="n">extension</span><span class="p">(</span><span class="n">plug</span><span class="p">,</span> <span class="s">&quot;company/ext-name&quot;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">plug_ext</span><span class="p">)</span> <span class="c1">// check if the interface was implemented
</span><span class="p">{</span>
  <span class="c1">// cast to the concrete type
</span>  <span class="k">const</span> <span class="k">struct</span> <span class="n">interface_type</span> <span class="o">*</span><span class="n">plug_ext1</span> <span class="o">=</span> <span class="p">(</span><span class="k">const</span> <span class="k">struct</span> <span class="n">interface_type</span> <span class="o">*</span><span class="p">)</span><span class="n">plug_ext</span><span class="p">;</span>

  <span class="c1">// use the interface ...
</span>  <span class="n">plug_ext1</span><span class="o">-&gt;</span><span class="n">my_fct</span><span class="p">(</span><span class="n">plug</span><span class="p">,</span> <span class="p">...);</span>
<span class="p">}</span>

<span class="c1">// For the host, this is similar:
</span><span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">host_ext</span> <span class="o">=</span> <span class="n">host</span><span class="o">-&gt;</span><span class="n">extension</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="s">&quot;company/ext-name&quot;</span><span class="p">);</span>
<span class="p">...</span>
</pre>
<p>If the extension is not supported, the plugin should return <tt class="docutils literal">NULL</tt>.</p>
<p>Extensions are interface, and <strong>there is no need for the caller to free the pointer</strong>.</p>
<p>By convention, extensions should provide a define for the extension name.</p>
<pre class="code c literal-block">
<span class="c1">// defined in &lt;clap/ext/ports.h&gt;
</span><span class="cp"># define CLAP_EXT_AUDIO_PORTS &quot;clap/audio-ports&quot;</span>
</pre>
</div>
<div class="section" id="audio-ports-configuration">
<h3><a class="toc-backref" href="#id17">Audio ports configuration</a></h3>
<p>A plugin may have multiple audio ports, and multiple configurations
(mono, stereo, quad, surround, ...). Yet we want to keep things simple,
flexible and dynamic.</p>
<dl class="docutils">
<dt>An audio port has:</dt>
<dd><ul class="first last simple">
<li>a direction (input or output)</li>
<li>a channel count: the number of pin in the bus</li>
<li>a channel mapping (eg: stereo left then right)</li>
<li>a role (input or output, sidechain input, audio rate modulation signal)</li>
<li>a name</li>
<li>is repeatable: can be used as a template to create multiple instance of the
same port and so connect multiple signals to it. For example you have an
analyzer and you want a repeatable input port, so the user can connect
an arbitrary number of signals.</li>
</ul>
</dd>
</dl>
<div class="section" id="standard-channel-mappings">
<h4><a class="toc-backref" href="#id18">Standard channel mappings</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="14%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">type</th>
<th class="head">pin</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>mono</td>
<td>0</td>
<td>mono</td>
</tr>
<tr><td rowspan="2">stereo</td>
<td>0</td>
<td>left</td>
</tr>
<tr><td>1</td>
<td>right</td>
</tr>
<tr><td rowspan="8">surround</td>
<td>0</td>
<td>front left</td>
</tr>
<tr><td>1</td>
<td>front right</td>
</tr>
<tr><td>2</td>
<td>center</td>
</tr>
<tr><td>3</td>
<td>low frequency</td>
</tr>
<tr><td>4</td>
<td>surround left</td>
</tr>
<tr><td>5</td>
<td>surround right</td>
</tr>
<tr><td>6</td>
<td>surround back left</td>
</tr>
<tr><td>7</td>
<td>surround back right</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="activation">
<h2><a class="toc-backref" href="#id19">Activation</a></h2>
<p>Before doing any processing, the plugin must be activated by calling
<tt class="docutils literal">bool succeed = <span class="pre">plugin-&gt;activate(plugin);</span></tt>.</p>
<p>If <tt class="docutils literal">succeed == true</tt> then the activation succeed. If the activation failed,
then the plugin is unusable.</p>
<p>The host must not call <tt class="docutils literal">activate()</tt> if the plugin is already activated.
Yet the plugin should handle correctly double calls to <tt class="docutils literal">activate()</tt>.</p>
<p>The plugin activation could be nothing, or could be a task which takes time,
like connecting a remote server or device.
So the host should not activate plugins in the audio processing thread.</p>
<p>To deactivate the plugin, just call <tt class="docutils literal"><span class="pre">plugin-&gt;deactivate(plugin)</span></tt>. Like
<tt class="docutils literal">activate()</tt>, <tt class="docutils literal">deactivate()</tt> should not be called from the audio processing
thread as it may take time.</p>
<p><tt class="docutils literal">deactivate()</tt> must not be called if the plugin is not activated. Yet the
plugin should handle this mis-usage.</p>
<p>The host must de-activate the plugin before destroying it. Again, if
deactivate was not called before destroy(), the plugin should handle it
gracefully.</p>
</div>
<div class="section" id="processing">
<h2><a class="toc-backref" href="#id20">Processing</a></h2>
<p>The processing is done in one call: <tt class="docutils literal"><span class="pre">plugin-&gt;process(plugin,</span> process);</tt>.
The data structure process regroup everything needed by the plugin:</p>
<ul class="simple">
<li>number of frames</li>
<li>events (in)</li>
<li>some time info</li>
</ul>
<p>Once the processing is finished, the methods returns a process status
which can be:</p>
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Status</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal">CLAP_PROCESS_ERROR</tt></td>
<td>An error happened, and the output should be discarded</td>
</tr>
<tr><td><tt class="docutils literal">CLAP_PROCESS_CONTINUE</tt></td>
<td>Succeed, the plugins wants to process the next block</td>
</tr>
<tr><td><tt class="docutils literal">CLAP_PROCESS_SLEEP</tt></td>
<td>Succeed, every voices terminated, wake me up on a new event</td>
</tr>
</tbody>
</table>
<p>If <tt class="docutils literal">process()</tt> returns <tt class="docutils literal">CLAP_PROCESS_SLEEP</tt> and some parameters were ramping
(see <tt class="docutils literal">CLAP_EVENT_PARAM_RAMP</tt> event), then the host must send a <tt class="docutils literal">CLAP_EVENT_PARAM_SET</tt>
or  <tt class="docutils literal">CLAP_EVENT_PARAM_RAMP</tt> for those parameters at the next call to process.</p>
<div class="section" id="audio-buffers">
<h3><a class="toc-backref" href="#id21">Audio buffers</a></h3>
<ul class="simple">
<li>The audio buffers are allocated by the host.</li>
<li>In-place processing is not supported by default, yet the host can use it
if the plugin has the attribute <tt class="docutils literal">CLAP_ATTR_SUPPORTS_IN_PLACE_PROCESSING</tt>.</li>
<li>See <a class="reference internal" href="#standard-channel-mappings">Standard channel mappings</a>.</li>
</ul>
</div>
<div class="section" id="events">
<h3><a class="toc-backref" href="#id22">Events</a></h3>
<ul class="simple">
<li>Event's time is relative to the first sample of the processing block.</li>
<li>The plugin must not modify the events.</li>
</ul>
<div class="section" id="notes">
<h4><a class="toc-backref" href="#id23">Notes</a></h4>
<p>A note is identified by a key. A key correspond to the keys of a midi keyboard (128 keys).
If the plugin supports tuning then it should use the <tt class="docutils literal"><span class="pre">event-&gt;note.pitch</span></tt> as
the note frequency.</p>
<p>The note A4 correspond to the key 57 and the frequency 440Hz.
The note A3 correspond to the key 45 and the frequency 220Hz.</p>
<p>If the plugin supports tuning, then the host could play the note A4 by sending
a NOTE_ON event with key = 0 and pitch = 440. Then to stop the the host can
send a NOTE_OFF event with the same key, so 0 in our case or it can send
a NOTE_ON event on the same key (0), which would terminate the note on the key
0 and start a new note on the key 0 with the given pitch.</p>
<p>Here is a scenario where the plugin does not support tuning:</p>
<ul class="simple">
<li>NOTE_ON, key = 60, pitch = 42; starts the note C4, with the pitch 493.88Hz</li>
<li>NOTE_OFF, key = 0, pitch = 493.88; ignored because no note has been started on key 0</li>
<li>NOTE_ON, key = 60, pitch = 54; retrigers the note C4, with the pitch 493.88Hz</li>
<li>NOTE_OFF, key = 60, pitch = 62; stops the note C4</li>
</ul>
<p>Here is a scenario where the plugin does support tuning:</p>
<ul class="simple">
<li>NOTE_ON, key = 60, pitch = 42; starts a note, with the pitch 42Hz</li>
<li>NOTE_OFF, key = 0, pitch = 493.88; ignored because no note has been started on key 0</li>
<li>NOTE_ON, key = 60, pitch = 54; stops the note with the pitch 42Hz and starts
a note with a pitch of 54Hz</li>
<li>NOTE_OFF, key = 60, pitch = 62; stops the note with a pitch of 54Hz</li>
</ul>
<p>The plugin is encouraged to use an array with 128 pointers to voice, so
it can quickly figure which voice is playing the given key.</p>
</div>
<div class="section" id="parameters">
<h4><a class="toc-backref" href="#id24">Parameters</a></h4>
<p>Parameters can be automated by the host using <tt class="docutils literal">CLAP_EVENT_PARAM_SET</tt> or
<tt class="docutils literal">CLAP_EVENT_PARAM_RAMP</tt>. Or they can be automated at audio rate by using
an audio buffer.</p>
<p>When using <tt class="docutils literal">CLAP_EVENT_PARAM_RAMP</tt>, the parameter is set to <tt class="docutils literal"><span class="pre">ev-&gt;param.value</span></tt>
and has to be incremented by <tt class="docutils literal"><span class="pre">event-&gt;param.increment</span></tt> for each samples, except
for the time of the event, and until an event <tt class="docutils literal">CLAP_EVENT_PARAM_SET</tt> or
<tt class="docutils literal">CLAP_EVENT_PARAM_RAMP</tt> occur for this parameter.</p>
</div>
</div>
</div>
<div class="section" id="id1">
<h2><a class="toc-backref" href="#id25">Parameters</a></h2>
<p>The host can get the plugin's parameters tree by using the params extension:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">params-&gt;count(plugin);</span></tt> to know the number of parameters</li>
<li><tt class="docutils literal"><span class="pre">params-&gt;get_param(plugin,</span> param_index, &amp;param);</tt> to get the parameter
value and description</li>
</ul>
<pre class="code c literal-block">
<span class="cp">#include</span> <span class="cpf">&lt;clap/ext/params.h&gt;</span><span class="cp">
</span>
<span class="k">struct</span> <span class="n">clap_plugin_params</span> <span class="o">*</span><span class="n">params</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">-&gt;</span><span class="n">extension</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">CLAP_EXT_PARAMS</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">params</span><span class="p">)</span>
  <span class="k">return</span><span class="p">;</span> <span class="c1">// no params extensions
</span><span class="kt">uint32_t</span> <span class="n">count</span> <span class="o">=</span> <span class="n">ports</span><span class="o">-&gt;</span><span class="n">count</span><span class="p">(</span><span class="n">plugin</span><span class="p">);</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">uint32_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">count</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">struct</span> <span class="n">clap_param</span> <span class="n">param</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">ports</span><span class="o">-&gt;</span><span class="n">get_param</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">param</span><span class="p">))</span>
    <span class="k">continue</span><span class="p">;</span>
  <span class="c1">// ...
</span><span class="p">}</span>
</pre>
<p>See <a class="reference internal" href="#clap-ext-params-h">clap/ext/params.h</a>.</p>
<div class="section" id="types">
<h3><a class="toc-backref" href="#id26">Types</a></h3>
<p>There are a few parameter types:</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="22%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">type</th>
<th class="head">value attribute</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>group</td>
<td>none</td>
<td>not a value, but the only parameter which can have
child. It should be used to organize parameters in
the host GUI.</td>
</tr>
<tr><td>bool</td>
<td><tt class="docutils literal">value.b</tt></td>
<td>a boolean value, can be true or false</td>
</tr>
<tr><td>float</td>
<td><tt class="docutils literal">value.f</tt></td>
<td>a float value</td>
</tr>
<tr><td>int</td>
<td><tt class="docutils literal">value.i</tt></td>
<td>an integer value</td>
</tr>
<tr><td>enum</td>
<td><tt class="docutils literal">value.i</tt></td>
<td>an enumeration, it uses integer values, and the host
should rely on <tt class="docutils literal">display_text</tt> to show its value.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="scales">
<h3><a class="toc-backref" href="#id27">Scales</a></h3>
<p>The plugin can inform the host, which scale to use for the parameter's UI
(knob, slider, ...). <tt class="docutils literal"><span class="pre">clap_param-&gt;scale</span></tt> can be set to <tt class="docutils literal">CLAP_PARAM_LINEAR</tt>
or <tt class="docutils literal">CLAP_PARAM_LOG</tt>. A logarithmic scale is convinient for a frequency
parameter.</p>
</div>
<div class="section" id="automation">
<h3><a class="toc-backref" href="#id28">Automation</a></h3>
<p>When a parameter is modified by the GUI, the plugin should send a
<tt class="docutils literal">CLAP_EVENT_PARAM_SET</tt> event must be sent to the host, using
<tt class="docutils literal"><span class="pre">host-&gt;events(host,</span> plugin, events);</tt> so the host can record the automation.</p>
<p>When a parameter is modified by an other parameter (this is discouraged),
for example imagine you have a parameter modulating &quot;absolutely&quot; an other
one through an XY mapping.
The host should record the modulation source but not the modulation target.
To do that the plugin uses <tt class="docutils literal"><span class="pre">clap_event_param-&gt;is_recordable</span></tt>.</p>
</div>
</div>
<div class="section" id="graphical-user-interface">
<h2><a class="toc-backref" href="#id29">Graphical User Interface</a></h2>
<div class="section" id="showing-the-gui">
<h3><a class="toc-backref" href="#id30">Showing the GUI</a></h3>
<p>To show the plugin's GUI, you need to use the gui extension: <tt class="docutils literal"><span class="pre">gui-&gt;open(plugin)</span></tt>.
If the plugin succeed to show the GUI, it returns <tt class="docutils literal">true</tt>, <tt class="docutils literal">false</tt>
otherwise.</p>
<pre class="code c literal-block">
<span class="cp">#include</span> <span class="cpf">&lt;clap/ext/gui.h&gt;</span><span class="cp">
</span>
<span class="k">struct</span> <span class="n">clap_plugin_gui</span> <span class="o">*</span><span class="n">gui</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">-&gt;</span><span class="n">extension</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">CLAP_EXT_GUI</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">gui</span><span class="p">)</span>
  <span class="n">gui</span><span class="o">-&gt;</span><span class="n">open</span><span class="p">(</span><span class="n">plugin</span><span class="p">);</span>
</pre>
<p>See <a class="reference internal" href="#clap-ext-gui-h">clap/ext/gui.h</a>.</p>
</div>
<div class="section" id="sending-events-to-the-host">
<h3><a class="toc-backref" href="#id31">Sending events to the host</a></h3>
<p>The plugin can notify the host of parameter changes by sending events to:
<tt class="docutils literal"><span class="pre">host-&gt;events(host,</span> plugin, events);</tt>.</p>
<p>Events sent to the host should be stamped:</p>
<pre class="code c literal-block">
<span class="k">struct</span> <span class="n">clap_event</span> <span class="n">ev</span><span class="p">;</span>
<span class="c1">// ...
</span><span class="n">ev</span><span class="p">.</span><span class="n">steady_time</span> <span class="o">=</span> <span class="o">*</span><span class="n">host</span><span class="o">-&gt;</span><span class="n">steady_time</span><span class="p">;</span>
<span class="n">host</span><span class="o">-&gt;</span><span class="n">events</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">plugin</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ev</span><span class="p">);</span>
</pre>
</div>
<div class="section" id="hiding-the-gui">
<h3><a class="toc-backref" href="#id32">Hiding the GUI</a></h3>
<p>The plugin should hide the GUI after a call to <tt class="docutils literal"><span class="pre">gui-&gt;close(plugin)</span></tt>.
If the plugin window has been closed by the user, then the plugin should
send an event <tt class="docutils literal">CLAP_EVENT_GUI_CLOSED</tt> to the host.</p>
<pre class="code c literal-block">
<span class="k">struct</span> <span class="n">clap_event</span> <span class="n">ev</span><span class="p">;</span>
<span class="n">ev</span><span class="p">.</span><span class="n">next</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="n">ev</span><span class="p">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">CLAP_EVENT_GUI_CLOSED</span><span class="p">;</span>
<span class="n">ev</span><span class="p">.</span><span class="n">sample_offset</span> <span class="o">=</span> <span class="o">*</span><span class="n">host</span><span class="o">-&gt;</span><span class="n">steady_time</span><span class="p">;</span>
<span class="n">host</span><span class="o">-&gt;</span><span class="n">events</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">plugin</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ev</span><span class="p">);</span>
</pre>
</div>
<div class="section" id="embedding">
<h3><a class="toc-backref" href="#id33">Embedding</a></h3>
<p>Some host are designed to embed plugin's window.
As embedding is not a requirement and is OS specific, it is then offered as
an extension.</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="35%" />
<col width="29%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">GUI</th>
<th class="head">header</th>
<th class="head">extension</th>
<th class="head">comment</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Generic</td>
<td><a class="reference internal" href="#clap-ext-embed-h">clap/ext/embed.h</a></td>
<td><tt class="docutils literal">CLAP_EMBED</tt></td>
<td>For the host</td>
</tr>
<tr><td>Windows</td>
<td><a class="reference internal" href="#clap-ext-embed-win32-h">clap/ext/embed-win32.h</a></td>
<td><tt class="docutils literal">CLAP_EMBED_WIN32</tt></td>
<td>For the plugin</td>
</tr>
<tr><td>X11</td>
<td><a class="reference internal" href="#clap-ext-embed-x11-h">clap/ext/embed-x11.h</a></td>
<td><tt class="docutils literal">CLAP_EMBED_X11</tt></td>
<td>For the plugin</td>
</tr>
<tr><td>Cocoa</td>
<td><a class="reference internal" href="#clap-ext-embed-cocoa-h">clap/ext/embed-cocoa.h</a></td>
<td><tt class="docutils literal">CLAP_EMBED_COCOA</tt></td>
<td>For the plugin</td>
</tr>
</tbody>
</table>
<div class="section" id="example-on-windows">
<h4><a class="toc-backref" href="#id34">Example on Windows</a></h4>
<pre class="code c literal-block">
<span class="cp">#include</span> <span class="cpf">&lt;clap/clap.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;clap/ext/gui.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;clap/ext/embed-win32.h&gt;</span><span class="cp">
</span>
<span class="k">struct</span> <span class="n">clap_plugin_embed_win32</span> <span class="o">*</span><span class="n">embed</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">-&gt;</span><span class="n">get_extension</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">CLAP_EMBED_WIN32</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">embed</span><span class="p">)</span>
  <span class="n">embed</span><span class="o">-&gt;</span><span class="n">embed</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">window</span><span class="p">);</span>

<span class="k">struct</span> <span class="n">clap_plugin_gui</span> <span class="o">*</span><span class="n">gui</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">-&gt;</span><span class="n">get_extension</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">CLAP_EXT_GUI</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">gui</span><span class="p">)</span>
  <span class="n">gui</span><span class="o">-&gt;</span><span class="n">open</span><span class="p">(</span><span class="n">plugin</span><span class="p">);</span>
</pre>
</div>
<div class="section" id="resizing-the-window">
<h4><a class="toc-backref" href="#id35">Resizing the window</a></h4>
<pre class="code c literal-block">
<span class="cp">#include</span> <span class="cpf">&lt;clap/clap.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;clap/ext/embed.h&gt;</span><span class="cp">
</span>
<span class="c1">// plugin code
</span><span class="k">struct</span> <span class="n">clap_host_embed</span> <span class="o">*</span><span class="n">embed</span> <span class="o">=</span> <span class="n">host</span><span class="o">-&gt;</span><span class="n">get_extension</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">CLAP_EMBED</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">embed</span> <span class="o">&amp;&amp;</span> <span class="n">embed</span><span class="o">-&gt;</span><span class="n">resize</span><span class="p">(</span><span class="n">host</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1">// resize succeed
</span><span class="p">}</span>
</pre>
</div>
</div>
</div>
<div class="section" id="presets">
<h2><a class="toc-backref" href="#id36">Presets</a></h2>
<div class="section" id="list-plugin-s-presets">
<h3><a class="toc-backref" href="#id37">List plugin's presets</a></h3>
<p>The host can browse the plugin's presets by using the preset extension:</p>
<pre class="code c literal-block">
<span class="cp">#include</span> <span class="cpf">&lt;clap/clap.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;clap/ext/draft/presets.h&gt;</span><span class="cp">
</span>
<span class="k">struct</span> <span class="n">clap_plugin_presets</span> <span class="o">*</span><span class="n">presets</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">-&gt;</span><span class="n">get_extension</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">CLAP_PRESETS</span><span class="p">);</span>
<span class="k">struct</span> <span class="n">clap_preset_iterator</span> <span class="o">*</span><span class="n">iter</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">clap_preset</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="n">presets</span> <span class="o">&amp;&amp;</span> <span class="n">presets</span><span class="o">-&gt;</span><span class="n">iter_begin</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">iter</span><span class="p">))</span> <span class="p">{</span>
  <span class="k">do</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">presets</span><span class="o">-&gt;</span><span class="n">iter_get</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">iter</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">preset</span><span class="p">))</span>
      <span class="k">break</span><span class="p">;</span>

    <span class="c1">// XXX: do your work with preset;
</span>  <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">presets</span><span class="o">-&gt;</span><span class="n">iter_next</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">iter</span><span class="p">));</span>

  <span class="c1">// release the iterator
</span>  <span class="n">presets</span><span class="o">-&gt;</span><span class="n">iter_destroy</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">iter</span><span class="p">);</span>
<span class="p">}</span>
</pre>
<p>See <a class="reference internal" href="#clap-ext-draft-presets-h">clap/ext/draft/presets.h</a>.</p>
</div>
<div class="section" id="load-a-preset">
<h3><a class="toc-backref" href="#id38">Load a preset</a></h3>
<p>To load a preset, the host have to send an event <tt class="docutils literal">CLAP_EVENT_PRESET_SET</tt> to
the plugin.</p>
<p>When a preset is loaded from the plugin's GUI, the plugin must send a
<tt class="docutils literal">CLAP_EVENT_PRESET_SET</tt> to the host.</p>
</div>
</div>
<div class="section" id="save-and-restore-plugin-s-state">
<h2><a class="toc-backref" href="#id39">Save and restore plugin's state</a></h2>
<p>Saving the plugin's state is done by using the state extension:</p>
<pre class="code c literal-block">
<span class="cp">#include</span> <span class="cpf">&lt;clap/clap.h&gt;</span><span class="cp">
#include</span> <span class="cpf">&lt;clap/ext/state.h&gt;</span><span class="cp">
</span>
<span class="kt">void</span>   <span class="o">*</span><span class="n">buffer</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="kt">size_t</span>  <span class="n">size</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">struct</span> <span class="n">clap_plugin_state</span> <span class="o">*</span><span class="n">state</span> <span class="o">=</span> <span class="n">plugin</span><span class="o">-&gt;</span><span class="n">get_extension</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">CLAP_EXT_STATE</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">state</span> <span class="o">&amp;&amp;</span> <span class="n">state</span><span class="o">-&gt;</span><span class="n">save</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">buffer</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">size</span><span class="p">))</span> <span class="p">{</span>
  <span class="c1">// save succeed
</span><span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="c1">// save failed
</span><span class="p">}</span>
</pre>
<p>Restoring the plugin's state is done by:</p>
<pre class="code c literal-block">
<span class="n">state</span><span class="o">-&gt;</span><span class="n">restore</span><span class="p">(</span><span class="n">plugin</span><span class="p">,</span> <span class="n">buffer</span><span class="p">,</span> <span class="n">size</span><span class="p">);</span>
</pre>
<p>The state of the plugin should be independent of the machine: you can save a
plugin state on a little endian machine and send it through the network to a
big endian machine, it should load again successfully.</p>
<p>See <a class="reference internal" href="#clap-ext-state-h">clap/ext/state.h</a>.</p>
<p>Note: if the plugin do not have the state extension, the host can save the
plugin's parameters and restore them.</p>
</div>
</div>
<div class="section" id="references">
<h1><a class="toc-backref" href="#id40">References</a></h1>
<div class="section" id="clap-clap-h">
<h2><a class="toc-backref" href="#id41">clap/clap.h</a></h2>
<pre class="code c literal-block">
<span class="cm">/*
 * CLAP - CLever Audio Plugin
 * ~~~~~~~~~~~~~~~~~~~~~~~~~~
 *
 * Copyright (c) 2014...2016 Alexandre BIQUE &lt;bique.alexandre&#64;gmail.com&gt;
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the &quot;Software&quot;), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */</span>

<span class="cp">#ifndef CLAP_H
# define CLAP_H
</span>
<span class="cp"># ifdef __cplusplus
</span><span class="k">extern</span> <span class="s">&quot;C&quot;</span> <span class="p">{</span>
<span class="cp"># endif
</span>
<span class="cp"># include &lt;stddef.h&gt;
# include &lt;stdbool.h&gt;
# include &lt;stdint.h&gt;
</span>
<span class="cp"># define CLAP_VERSION_MAKE(Major, Minor, Revision) \
  ((((Major) &amp; 0xff) &lt;&lt; 16) | (((Minor) &amp; 0xff) &lt;&lt; 8) | ((Revision) &amp; 0xff))
# define CLAP_VERSION CLAP_VERSION_MAKE(0, 2, 0)
# define CLAP_VERSION_MAJ(Version) (((Version) &gt;&gt; 16) &amp; 0xff)
# define CLAP_VERSION_MIN(Version) (((Version) &gt;&gt; 8) &amp; 0xff)
# define CLAP_VERSION_REV(Version) ((Version) &amp; 0xff)
</span>
<span class="cp">#if defined _WIN32 || defined __CYGWIN__
# ifdef __GNUC__
#  define CLAP_EXPORT __attribute__ ((dllexport))
# else
#  define CLAP_EXPORT __declspec(dllexport)
# endif
#else
# if __GNUC__ &gt;= 4
#  define CLAP_EXPORT __attribute__ ((visibility (&quot;default&quot;)))
# else
#  define CLAP_EXPORT
# endif
#endif
</span>
<span class="c1">///////////////////////////
// FORWARD DELCLARATIONS //
///////////////////////////
</span>
<span class="k">struct</span> <span class="n">clap_plugin</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">clap_host</span><span class="p">;</span>

<span class="k">enum</span> <span class="n">clap_string_size</span>
<span class="p">{</span>
  <span class="n">CLAP_ID_SIZE</span>         <span class="o">=</span> <span class="mi">64</span><span class="p">,</span>
  <span class="n">CLAP_NAME_SIZE</span>       <span class="o">=</span> <span class="mi">64</span><span class="p">,</span>
  <span class="n">CLAP_DESC_SIZE</span>       <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
  <span class="n">CLAP_DISPLAY_SIZE</span>    <span class="o">=</span> <span class="mi">64</span><span class="p">,</span>
  <span class="n">CLAP_TAGS_SIZE</span>       <span class="o">=</span> <span class="mi">256</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">clap_log_severity</span>
<span class="p">{</span>
  <span class="n">CLAP_LOG_DEBUG</span>   <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">CLAP_LOG_INFO</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">CLAP_LOG_WARNING</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
  <span class="n">CLAP_LOG_ERROR</span>   <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
  <span class="n">CLAP_LOG_FATAL</span>   <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>
<span class="p">};</span>

<span class="c1">// Description of the plugin
</span><span class="cp"># define CLAP_ATTR_DESCRIPTION     &quot;clap/description&quot;
</span><span class="c1">// Product version string
</span><span class="cp"># define CLAP_ATTR_VERSION         &quot;clap/version&quot;
</span><span class="c1">// Manufacturer name
</span><span class="cp"># define CLAP_ATTR_MANUFACTURER    &quot;clap/manufacturer&quot;
</span><span class="c1">// Url to product
</span><span class="cp"># define CLAP_ATTR_URL             &quot;clap/url&quot;
</span><span class="c1">// Url to support page, or mail to support
</span><span class="cp"># define CLAP_ATTR_SUPPORT         &quot;clap/support&quot;
</span>
<span class="c1">// Should be &quot;1&quot; if the plugin supports tunning.
</span><span class="cp"># define CLAP_ATTR_SUPPORTS_TUNING &quot;clap/supports_tuning&quot;
</span>
<span class="c1">////////////////
// PARAMETERS //
////////////////
</span>
<span class="k">union</span> <span class="n">clap_param_value</span>
<span class="p">{</span>
  <span class="kt">bool</span>    <span class="n">b</span><span class="p">;</span>
  <span class="kt">float</span>   <span class="n">f</span><span class="p">;</span>
  <span class="kt">int32_t</span> <span class="n">i</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">////////////
// EVENTS //
////////////
</span>
<span class="k">enum</span> <span class="n">clap_event_type</span>
<span class="p">{</span>
  <span class="n">CLAP_EVENT_NOTE_ON</span>    <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>    <span class="c1">// note attribute
</span>  <span class="n">CLAP_EVENT_NOTE_OFF</span>   <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>    <span class="c1">// note attribute
</span>  <span class="n">CLAP_EVENT_NOTE_CHOKE</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>    <span class="c1">// note attribute
</span>
  <span class="n">CLAP_EVENT_PARAM_SET</span>  <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>    <span class="c1">// param attribute
</span>  <span class="n">CLAP_EVENT_PARAM_RAMP</span> <span class="o">=</span> <span class="mi">4</span><span class="p">,</span>    <span class="c1">// param attribute
</span>
  <span class="n">CLAP_EVENT_CONTROL</span>    <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>    <span class="c1">// control attribute
</span>  <span class="n">CLAP_EVENT_MIDI</span>       <span class="o">=</span> <span class="mi">6</span><span class="p">,</span>    <span class="c1">// midi attribute
</span>
  <span class="n">CLAP_EVENT_PLAY</span>  <span class="o">=</span> <span class="mi">12</span><span class="p">,</span> <span class="c1">// no attribute
</span>  <span class="n">CLAP_EVENT_PAUSE</span> <span class="o">=</span> <span class="mi">13</span><span class="p">,</span> <span class="c1">// no attribute
</span>  <span class="n">CLAP_EVENT_STOP</span>  <span class="o">=</span> <span class="mi">14</span><span class="p">,</span> <span class="c1">// no attribute
</span>  <span class="n">CLAP_EVENT_JUMP</span>  <span class="o">=</span> <span class="mi">15</span><span class="p">,</span>  <span class="c1">// attribute jump
</span>
  <span class="n">CLAP_EVENT_PROGRAM</span> <span class="o">=</span> <span class="mi">16</span><span class="p">,</span> <span class="c1">// program attribute
</span><span class="p">};</span>

<span class="k">struct</span> <span class="n">clap_event_param</span>
<span class="p">{</span>
  <span class="cm">/* key/channel index */</span>
  <span class="kt">int8_t</span>                  <span class="n">key</span><span class="p">;</span>     <span class="c1">// 0..127
</span>  <span class="kt">int8_t</span>                  <span class="n">channel</span><span class="p">;</span> <span class="c1">// 0..16
</span>
  <span class="cm">/* parameter */</span>
  <span class="kt">int32_t</span>                 <span class="n">index</span><span class="p">;</span>     <span class="c1">// parameter index
</span>  <span class="k">union</span> <span class="n">clap_param_value</span>  <span class="n">value</span><span class="p">;</span>
  <span class="kt">float</span>                   <span class="n">increment</span><span class="p">;</span> <span class="c1">// for param ramp
</span><span class="p">};</span>

<span class="cm">/** Note On/Off event. */</span>
<span class="k">struct</span> <span class="n">clap_event_note</span>
<span class="p">{</span>
  <span class="kt">int8_t</span>  <span class="n">key</span><span class="p">;</span>      <span class="c1">// 0..127
</span>  <span class="kt">int8_t</span>  <span class="n">channel</span><span class="p">;</span>  <span class="c1">// 0..15
</span>  <span class="kt">float</span>   <span class="n">pitch</span><span class="p">;</span>    <span class="c1">// hertz
</span>  <span class="kt">float</span>   <span class="n">velocity</span><span class="p">;</span> <span class="c1">// 0..1
</span><span class="p">};</span>

<span class="k">struct</span> <span class="n">clap_event_control</span>
<span class="p">{</span>
  <span class="kt">int8_t</span> <span class="n">key</span><span class="p">;</span>     <span class="c1">// 0..127
</span>  <span class="kt">int8_t</span> <span class="n">channel</span><span class="p">;</span> <span class="c1">// 0..15
</span>  <span class="kt">int8_t</span> <span class="n">control</span><span class="p">;</span> <span class="c1">// 0..127
</span>  <span class="kt">float</span>  <span class="n">value</span><span class="p">;</span>   <span class="c1">// 0..1
</span><span class="p">};</span>

<span class="k">struct</span> <span class="n">clap_event_midi</span>
<span class="p">{</span>
  <span class="cm">/* midi event */</span>
  <span class="k">const</span> <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">buffer</span><span class="p">;</span>
  <span class="kt">int32_t</span>        <span class="n">size</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">clap_event_jump</span>
<span class="p">{</span>
  <span class="kt">int32_t</span> <span class="n">tempo</span><span class="p">;</span>      <span class="c1">// tempo in samples
</span>  <span class="kt">int32_t</span> <span class="n">bar</span><span class="p">;</span>        <span class="c1">// the bar number
</span>  <span class="kt">int32_t</span> <span class="n">bar_offset</span><span class="p">;</span> <span class="c1">// 0 &lt;= bar_offset &lt; tsig_denom * tempo
</span>  <span class="kt">int64_t</span> <span class="n">song_time</span><span class="p">;</span>  <span class="c1">// song time in micro seconds
</span>  <span class="kt">int32_t</span> <span class="n">tsig_num</span><span class="p">;</span>   <span class="c1">// time signature numerator
</span>  <span class="kt">int32_t</span> <span class="n">tsig_denom</span><span class="p">;</span> <span class="c1">// time signature denominator
</span><span class="p">};</span>

<span class="cm">/**
 * Asks the plugin to load a program.
 * This is analogue to the midi program set:
 * bank msb goes into bank_msb
 * bank lsb goes into bank_lsb
 * program goes into program
 *
 * Clap is not limited to 127.
 *
 * The main advantage of setting a program instead of loading
 * a preset, is that the program should already be in the plugin's
 * memory, and can be set instantly. If the plugin has to load
 * a preset from the filesystem, then parse it, do memory allocation,
 * there is no guarentee that the preset will be loaded in time.
 */</span>
<span class="k">struct</span> <span class="n">clap_event_program</span>
<span class="p">{</span>
  <span class="kt">int32_t</span> <span class="n">bank_msb</span><span class="p">;</span> <span class="c1">// 0..0x7FFFFFFF
</span>  <span class="kt">int32_t</span> <span class="n">bank_lsb</span><span class="p">;</span> <span class="c1">// 0..0x7FFFFFFF
</span>  <span class="kt">int32_t</span> <span class="n">program</span><span class="p">;</span>  <span class="c1">// 0..0x7FFFFFFF
</span><span class="p">};</span>

<span class="k">struct</span> <span class="n">clap_event</span>
<span class="p">{</span>
  <span class="k">struct</span> <span class="n">clap_event</span>    <span class="o">*</span><span class="n">next</span><span class="p">;</span> <span class="c1">// linked list, NULL on end
</span>  <span class="k">enum</span> <span class="n">clap_event_type</span>  <span class="n">type</span><span class="p">;</span>
  <span class="kt">int64_t</span>               <span class="n">time</span><span class="p">;</span> <span class="c1">// offset from the first sample in the process block
</span>  <span class="kt">int32_t</span>               <span class="n">port</span><span class="p">;</span> <span class="c1">// event port id
</span>
  <span class="k">union</span> <span class="p">{</span>
    <span class="k">struct</span> <span class="n">clap_event_note</span>        <span class="n">note</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">clap_event_control</span>     <span class="n">control</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">clap_event_param</span>       <span class="n">param</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">clap_event_midi</span>        <span class="n">midi</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">clap_event_jump</span>        <span class="n">jump</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">clap_event_program</span>     <span class="n">program</span><span class="p">;</span>
  <span class="p">};</span>
<span class="p">};</span>

<span class="c1">/////////////
// PROCESS //
/////////////
</span>
<span class="k">enum</span> <span class="n">clap_process_status</span>
<span class="p">{</span>
  <span class="cm">/* Processing failed. The output buffer must be discarded. */</span>
  <span class="n">CLAP_PROCESS_ERROR</span>    <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>

  <span class="cm">/* Processing succeed. */</span>
  <span class="n">CLAP_PROCESS_CONTINUE</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>

  <span class="cm">/* Processing succeed, but no more processing is required, until next event. */</span>
  <span class="n">CLAP_PROCESS_SLEEP</span>    <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">clap_process</span>
<span class="p">{</span>
  <span class="cm">/* number of frame to process */</span>
  <span class="kt">int32_t</span> <span class="n">frames_count</span><span class="p">;</span>

  <span class="cm">/* process info */</span>
  <span class="kt">int64_t</span> <span class="n">steady_time</span><span class="p">;</span> <span class="c1">// the steady time in samples
</span>
  <span class="cm">/* Linked list of events
   * The plugin must not modify those events. */</span>
  <span class="k">struct</span> <span class="n">clap_event</span> <span class="o">*</span><span class="n">in_events</span><span class="p">;</span>
  <span class="k">struct</span> <span class="n">clap_event</span> <span class="o">*</span><span class="n">out_events</span><span class="p">;</span>
<span class="p">};</span>

<span class="c1">//////////
// HOST //
//////////
</span>
<span class="k">struct</span> <span class="n">clap_host</span>
<span class="p">{</span>
  <span class="kt">int32_t</span> <span class="n">clap_version</span><span class="p">;</span> <span class="c1">// initialized to CLAP_VERSION
</span>
  <span class="kt">void</span> <span class="o">*</span><span class="n">host_data</span><span class="p">;</span> <span class="c1">// reserved pointer for the host
</span>
  <span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="n">CLAP_NAME_SIZE</span><span class="p">];</span> <span class="c1">// plugin name, eg: &quot;BitwigStudio&quot;
</span>  <span class="kt">char</span> <span class="n">version</span><span class="p">[</span><span class="n">CLAP_VERSION_SIZE</span><span class="p">];</span> <span class="c1">// the plugin version, eg: &quot;1.3.14&quot;
</span>
  <span class="cm">/* returns the size of the original string, 0 if not string
   * [thread-safe] */</span>
  <span class="kt">int32_t</span> <span class="p">(</span><span class="o">*</span><span class="n">get_attribute</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_host</span> <span class="o">*</span><span class="n">host</span><span class="p">,</span>
                           <span class="k">const</span> <span class="kt">char</span>       <span class="o">*</span><span class="n">attr</span><span class="p">,</span>
                           <span class="kt">char</span>             <span class="o">*</span><span class="n">buffer</span><span class="p">,</span>
                           <span class="kt">int32_t</span>           <span class="n">size</span><span class="p">);</span>

  <span class="cm">/* Log a message through the host.
   * [thread-safe] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">log</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_host</span>       <span class="o">*</span><span class="n">host</span><span class="p">,</span>
              <span class="k">struct</span> <span class="n">clap_plugin</span>     <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
              <span class="k">enum</span> <span class="n">clap_log_severity</span>  <span class="n">severity</span><span class="p">,</span>
              <span class="k">const</span> <span class="kt">char</span>             <span class="o">*</span><span class="n">msg</span><span class="p">);</span>

  <span class="cm">/* query an extension
   * [thread-safe] */</span>
  <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="p">(</span><span class="o">*</span><span class="n">extension</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_host</span> <span class="o">*</span><span class="n">host</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">extention_id</span><span class="p">);</span>
<span class="p">};</span>

<span class="c1">////////////
// PLUGIN //
////////////
</span>
<span class="cm">/* bitfield
 * This gives an hint to the host what the plugin might do. */</span>
<span class="k">enum</span> <span class="n">clap_plugin_type</span>
<span class="p">{</span>
  <span class="cm">/* Instruments can play notes, and generate audio */</span>
  <span class="n">CLAP_PLUGIN_INSTRUMENT</span>   <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">0</span><span class="p">),</span>

  <span class="cm">/* Audio effects, process audio input and produces audio.
   * Exemple: delay, reverb, compressor. */</span>
  <span class="n">CLAP_PLUGIN_AUDIO_EFFECT</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">),</span>

  <span class="cm">/* Event effects, takes events as input and produces events.
   * Exemple: arpegiator */</span>
  <span class="n">CLAP_PLUGIN_EVENT_EFFECT</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">2</span><span class="p">),</span> <span class="c1">// can be seen as midi effect
</span>
  <span class="cm">/* Analyze audio and/or events, and produces analysis results */</span>
  <span class="n">CLAP_PLUGIN_ANALYZER</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">),</span>

  <span class="cm">/* This plugin is a modular system, so it can load &quot;modules&quot;,
   * have dynamic number of ports and parameters.
   * In short it could do anything. */</span>
  <span class="n">CLAP_PLUGIN_PATCHER</span>      <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span><span class="p">),</span>

  <span class="cm">/* This plugin streams the audio signal.
   * For example it can stream to a web radio.
   * This is important to not block the process loop. */</span>
  <span class="n">CLAP_PLUGIN_STREAMER</span>     <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">),</span>

  <span class="cm">/* This plugin act as a proxy, so it forwards the events/audio
   * to an other program on the same machine or on the network.
   *
   * For example a wine bridge which runs Windows plugins on Linux,
   * is a proxy. A plugin which sends the data to an hardware device
   * is a proxy as well. */</span>
  <span class="n">CLAP_PLUGIN_PROXY</span>        <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">6</span><span class="p">),</span>

  <span class="cm">/* This plugin is a sampler, and can be used to load generic
   * audio files. */</span>
  <span class="n">CLAP_PLUGIN_SAMPLER</span>      <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">7</span><span class="p">),</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">clap_plugin</span>
<span class="p">{</span>
  <span class="kt">int32_t</span> <span class="n">clap_version</span><span class="p">;</span> <span class="c1">// initialized to CLAP_VERSION
</span>
  <span class="kt">void</span> <span class="o">*</span><span class="n">host_data</span><span class="p">;</span>   <span class="c1">// reserved pointer for the host
</span>  <span class="kt">void</span> <span class="o">*</span><span class="n">plugin_data</span><span class="p">;</span> <span class="c1">// reserved pointer for the plugin
</span>
  <span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="n">CLAP_NAME_SIZE</span><span class="p">];</span> <span class="c1">// plugin name, eg: &quot;Diva&quot;
</span>  <span class="kt">char</span> <span class="n">id</span><span class="p">[</span><span class="n">CLAP_ID_SIZE</span><span class="p">];</span> <span class="c1">// plugin id, eg: &quot;u-he/diva&quot;
</span>  <span class="kt">char</span> <span class="n">version</span><span class="p">[</span><span class="n">CLAP_VERSION_SIZE</span><span class="p">];</span> <span class="c1">// the plugin version, eg: &quot;1.3.2&quot;
</span>
  <span class="k">enum</span> <span class="n">clap_plugin_type</span> <span class="n">plugin_type</span><span class="p">;</span>

  <span class="cm">/* Free the plugin and its resources.
   * It is not required to deactivate the plugin prior to this call. */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">destroy</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>

  <span class="cm">/* Copy at most size of the attribute's value into buffer.
   * This function must place a '\0' byte at the end of the string.
   * Returns the size of the original string or 0 if there is no
   * value for this attributes.
   * [thread-safe] */</span>
  <span class="kt">int32_t</span> <span class="p">(</span><span class="o">*</span><span class="n">get_attribute</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                           <span class="k">const</span> <span class="kt">char</span>         <span class="o">*</span><span class="n">attr</span><span class="p">,</span>
                           <span class="kt">char</span>               <span class="o">*</span><span class="n">buffer</span><span class="p">,</span>
                           <span class="kt">int32_t</span>             <span class="n">size</span><span class="p">);</span>

  <span class="cm">/* activation/deactivation
   * [audio-thread] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">activate</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">deactivate</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>

  <span class="cm">/* process audio, events, ...
   * [audio-thread] */</span>
  <span class="k">enum</span> <span class="nf">clap_process_status</span> <span class="p">(</span><span class="o">*</span><span class="n">process</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span>  <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                                      <span class="k">struct</span> <span class="n">clap_process</span> <span class="o">*</span><span class="n">process</span><span class="p">);</span>

  <span class="cm">/* query an extension
   * [thread-safe] */</span>
  <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="p">(</span><span class="o">*</span><span class="n">extension</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">id</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/* This interface is the entry point of the dynamic library.
 *
 * Every methods must be thread-safe.
 *
 * Common sample rate values are: 44100, 48000, 88200, 96000,
 * 176400, 192000. */</span>
<span class="k">struct</span> <span class="n">clap_plugin_factory</span>
<span class="p">{</span>
  <span class="cm">/* Get the number of plugins available.
   * [thread-safe] */</span>
  <span class="kt">int32_t</span> <span class="n">get_plugin_count</span><span class="p">(</span><span class="k">struct</span> <span class="n">clap_plugin_factory</span> <span class="o">*</span><span class="n">factory</span><span class="p">);</span>

  <span class="cm">/* Create a clap_plugin by its index.
   * Valid indexes are from 0 to get_plugin_count() - 1.
   * Returns null in case of error.
   * [thread-safe] */</span>
  <span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="nf">create_plugin_by_index</span><span class="p">(</span><span class="k">struct</span> <span class="n">clap_plugin_factory</span> <span class="o">*</span><span class="n">factory</span><span class="p">,</span>
                                             <span class="k">struct</span> <span class="n">clap_host</span>           <span class="o">*</span><span class="n">host</span><span class="p">,</span>
                                             <span class="kt">int32_t</span>                     <span class="n">sample_rate</span><span class="p">,</span>
                                             <span class="kt">int32_t</span>                     <span class="n">index</span><span class="p">);</span>

  <span class="cm">/* Create a clap_plugin by its plugin_id.
   * Returns null in case of error.
   * [thread-safe] */</span>
  <span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="nf">create_plugin_by_id</span><span class="p">(</span><span class="k">struct</span> <span class="n">clap_plugin_factory</span> <span class="o">*</span><span class="n">factory</span><span class="p">,</span>
                                          <span class="k">struct</span> <span class="n">clap_host</span>           <span class="o">*</span><span class="n">host</span><span class="p">,</span>
                                          <span class="kt">int32_t</span>                     <span class="n">sample_rate</span><span class="p">,</span>
                                          <span class="k">const</span> <span class="kt">char</span>                 <span class="o">*</span><span class="n">plugin_id</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/* Entry point */</span>
<span class="n">CLAP_EXPORT</span> <span class="k">extern</span> <span class="k">const</span> <span class="k">struct</span> <span class="n">clap_plugin_factory</span> <span class="o">*</span><span class="n">clap_plugin_factory</span><span class="p">;</span>

<span class="cp"># ifdef __cplusplus
</span><span class="p">}</span>
<span class="cp"># endif
</span>
<span class="cp">#endif </span><span class="cm">/* !CLAP_H */</span>
</pre>
</div>
<div class="section" id="clap-ext-state-h">
<h2><a class="toc-backref" href="#id42">clap/ext/state.h</a></h2>
<pre class="code c literal-block">
<span class="cp">#ifndef CLAP_EXT_STATE_H
# define CLAP_EXT_STATE_H
</span>
<span class="cp"># include &quot;../clap.h&quot;
</span>
<span class="cp"># define CLAP_EXT_STATE &quot;clap/state&quot;
</span>
<span class="k">struct</span> <span class="n">clap_plugin_state</span>
<span class="p">{</span>
  <span class="cm">/* The plugin has to allocate and save its state into *buffer.
   * The plugin is also responsible to free the buffer on the
   * next call to save() or when the plugin is destroyed.
   * [audio-thread] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">save</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span> <span class="kt">void</span> <span class="o">**</span><span class="n">buffer</span><span class="p">,</span> <span class="kt">int32_t</span> <span class="o">*</span><span class="n">size</span><span class="p">);</span>

  <span class="cm">/* [audio-thread] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">restore</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">buffer</span><span class="p">,</span> <span class="kt">int32_t</span> <span class="n">size</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* !CLAP_EXT_STATE_H */</span>
</pre>
</div>
<div class="section" id="clap-ext-audio-ports-h">
<h2><a class="toc-backref" href="#id43">clap/ext/audio-ports.h</a></h2>
<pre class="code c literal-block">
<span class="cp">#ifndef CLAP_EXT_AUDIO_PORTS_H
# define CLAP_EXT_AUDIO_PORTS_H
</span>
<span class="cp"># include &quot;../clap.h&quot;
</span>
<span class="cp"># define CLAP_EXT_AUDIO_PORTS &quot;clap/audio-ports&quot;
</span>
<span class="k">enum</span> <span class="n">clap_audio_port_channel_mapping</span>
<span class="p">{</span>
  <span class="n">CLAP_AUDIO_PORT_UNSPECIFIED</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">CLAP_AUDIO_PORT_MONO</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>

  <span class="c1">// left, right
</span>  <span class="n">CLAP_AUDIO_PORT_STEREO</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>

  <span class="c1">// front left, front right, center, low, surround left, surround right
</span>  <span class="c1">// surround back left, surround back right
</span>  <span class="n">CLAP_AUDIO_PORT_SURROUND</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">enum</span> <span class="n">clap_audio_port_role</span>
<span class="p">{</span>
  <span class="n">CLAP_AUDIO_PORT_INOUT</span>      <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">CLAP_AUDIO_PORT_SIDECHAIN</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">CLAP_AUDIO_PORT_MODULATION</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">clap_audio_port_info</span>
<span class="p">{</span>
  <span class="kt">int32_t</span>                              <span class="n">id</span><span class="p">;</span>
  <span class="kt">bool</span>                                 <span class="n">is_input</span><span class="p">;</span>
  <span class="kt">int32_t</span>                              <span class="n">channel_count</span><span class="p">;</span>
  <span class="k">enum</span> <span class="n">clap_audio_port_channel_mapping</span> <span class="n">channel_mapping</span><span class="p">;</span>
  <span class="k">enum</span> <span class="n">clap_audio_port_role</span>            <span class="n">role</span><span class="p">;</span>
  <span class="kt">char</span>                                 <span class="n">name</span><span class="p">[</span><span class="n">CLAP_NAME_SIZE</span><span class="p">];</span>

  <span class="cm">/* If true, then this is a virtual port which can be cloned
   * and connected multiple times.
   * Only useful for input ports.  */</span>
  <span class="kt">bool</span>                                 <span class="n">is_cloneable</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">clap_audio_port</span>
<span class="p">{</span>
  <span class="kt">int32_t</span>                                <span class="n">channel_count</span><span class="p">;</span>
  <span class="k">enum</span> <span class="n">clap_audio_port_channel_mapping</span>   <span class="n">channel_mapping</span><span class="p">;</span>
  <span class="kt">float</span>                                <span class="o">**</span><span class="n">data</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* The audio ports configuration has to be done while the plugin is
 * deactivated. */</span>
<span class="k">struct</span> <span class="n">clap_plugin_audio_ports</span>
<span class="p">{</span>
  <span class="cm">/* number of ports, including inputs and outputs
   * [audio-thread] */</span>
  <span class="kt">int32_t</span> <span class="p">(</span><span class="o">*</span><span class="n">get_count</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span>         <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>

  <span class="cm">/* get info about about an audio port.
   * [audio-thread] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">get_info</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span>             <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                   <span class="kt">int32_t</span>                         <span class="n">index</span><span class="p">,</span>
                   <span class="k">struct</span> <span class="n">clap_audio_port_info</span>    <span class="o">*</span><span class="n">info</span><span class="p">);</span>

  <span class="cm">/* Connect the given port to the plugin's port at index.
   * user_name is the name of the peer port given by the host/user.
   * It can be useful especialy for repeatable ports.
   * Returns the id of the port. In case of repeatable port,
   * make sure that each connected port has a different id.
   * Returns -1 if the connection failed.
   * [audio-thread] */</span>
  <span class="kt">int32_t</span> <span class="p">(</span><span class="o">*</span><span class="n">connect</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span>           <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                     <span class="kt">int32_t</span>                       <span class="n">port_id</span><span class="p">,</span>
                     <span class="k">const</span> <span class="k">struct</span> <span class="n">clap_audio_port</span> <span class="o">*</span><span class="n">port</span><span class="p">,</span>
                     <span class="k">const</span> <span class="kt">char</span>                   <span class="o">*</span><span class="n">user_name</span><span class="p">);</span>

  <span class="cm">/* Disconnects a port.
   * [audio-thread] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">disconnect</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span>           <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                     <span class="kt">int32_t</span>                       <span class="n">port_id</span><span class="p">);</span>

  <span class="cm">/* Returns the absolute port latency in samples.
   * [audio-thread] */</span>
  <span class="kt">int32_t</span> <span class="p">(</span><span class="o">*</span><span class="n">get_latency</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span>       <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                         <span class="kt">int32_t</span>                   <span class="n">port_id</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">clap_host_audio_ports</span>
<span class="p">{</span>
  <span class="cm">/* Tell the host that the plugin ports has changed.
   * The host shall deactivate the plugin and then
   * scan the ports again.
   * [thread-safe] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">changed</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_host</span>   <span class="o">*</span><span class="n">host</span><span class="p">,</span>
                  <span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>

  <span class="cm">/* Tell the host that the latency changed. The host should
   * call get_port_latency on each ports.
   * [thread-safe] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">latency_changed</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_host</span> <span class="o">*</span><span class="n">host</span><span class="p">,</span>
                          <span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* !CLAP_EXT_PORT_H */</span>
</pre>
</div>
<div class="section" id="clap-ext-event-ports-h">
<h2><a class="toc-backref" href="#id44">clap/ext/event-ports.h</a></h2>
<pre class="code c literal-block">
<span class="cp">#ifndef CLAP_EVENT_PORTS_H
# define CLAP_EVENT_PORTS_H
</span>
<span class="cp"># include &quot;../clap.h&quot;
</span>
<span class="cp"># define CLAP_EXT_EVENT_PORTS &quot;clap/event-ports&quot;
</span>
<span class="cp"># define CLAP_MAIN_EVENT_PORT_ID 0
</span>
<span class="k">struct</span> <span class="n">clap_audio_port_info</span>
<span class="p">{</span>
  <span class="cm">/* This number uniquely identify the port.
   * There are two id space, one for the input event ports,
   * and one for the output event ports.
   * Valid ids are greater than 0.
   * Every clap plugins always have one input event port and
   * one output event port, their id is 0 (CLAP_MAIN_EVENT_PORT_ID).
   *
   * So one plugin only need this extension for additional ports. */</span>
  <span class="kt">int32_t</span> <span class="n">id</span><span class="p">;</span>
  <span class="kt">bool</span>    <span class="n">is_input</span><span class="p">;</span>
  <span class="kt">char</span>    <span class="n">name</span><span class="p">[</span><span class="n">CLAP_NAME_SIZE</span><span class="p">];</span>

  <span class="cm">/* If true, then this is a virtual port which can be cloned
   * and connected multiple times.
   * Only useful for input ports. */</span>
  <span class="kt">bool</span> <span class="n">is_cloneable</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">clap_plugin_event_ports</span>
<span class="p">{</span>
  <span class="cm">/* number of ports, including inputs and outputs
   * [audio-thread] */</span>
  <span class="kt">int32_t</span> <span class="p">(</span><span class="o">*</span><span class="n">get_count</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span>         <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>

  <span class="cm">/* get info about about an event port.
   * [audio-thread] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">get_info</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span>             <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                   <span class="kt">int32_t</span>                         <span class="n">index</span><span class="p">,</span>
                   <span class="k">struct</span> <span class="n">clap_event_port_info</span>    <span class="o">*</span><span class="n">info</span><span class="p">);</span>

  <span class="cm">/* Clones a clonable port.
   * On success returns a unique port id, for the cloned port.
   * On failure, returns -1.
   * user_name is a string provided by the host to tell the
   * plugin how to name the new cloned port.
   *
   * [audio-thread]
   */</span>
  <span class="kt">int32_t</span> <span class="p">(</span><span class="o">*</span><span class="n">clone_port</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                        <span class="kt">int32_t</span>             <span class="n">port_id</span><span class="p">,</span>
                        <span class="k">const</span> <span class="kt">char</span>         <span class="o">*</span><span class="n">user_name</span><span class="p">);</span>

  <span class="cm">/* When the host is done with a cloned port, it can call
   * release_port() to release the resources.
   * [audio-thread]*/</span>
  <span class="kt">int32_t</span> <span class="p">(</span><span class="o">*</span><span class="n">release_port</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                          <span class="kt">int32_t</span>             <span class="n">port_id</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* !EVENT_PORTS_H */</span>
</pre>
</div>
<div class="section" id="clap-ext-params-h">
<h2><a class="toc-backref" href="#id45">clap/ext/params.h</a></h2>
<pre class="code c literal-block">
<span class="cp">#ifndef CLAP_EXT_PARAMS_H
# define CLAP_EXT_PARAMS_H
</span>
<span class="cp"># include &quot;../clap.h&quot;
# include &quot;ports.h&quot;
</span>
<span class="cp">#ifdef __cplusplus
</span><span class="k">extern</span> <span class="s">&quot;C&quot;</span> <span class="p">{</span>
<span class="cp">#endif
</span>
<span class="cp"># define CLAP_EXT_PARAMS &quot;clap/params&quot;
# define CLAP_ROOT_MODULE_ID &quot;&quot;
</span>
<span class="k">enum</span> <span class="n">clap_param_type</span>
<span class="p">{</span>
  <span class="n">CLAP_PARAM_FLOAT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="c1">// uses value.f
</span>  <span class="n">CLAP_PARAM_BOOL</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="c1">// uses value.b
</span>  <span class="n">CLAP_PARAM_INT</span>   <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="c1">// uses value.i
</span>  <span class="n">CLAP_PARAM_ENUM</span>  <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="c1">// uses value.i
</span><span class="p">};</span>

<span class="cm">/* This is useful for the knob scaling. */</span>
<span class="k">enum</span> <span class="n">clap_param_scale</span>
<span class="p">{</span>
  <span class="n">CLAP_PARAM_SCALE_LINEAR</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
  <span class="n">CLAP_PARAM_SCALE_LOG</span>    <span class="o">=</span> <span class="mi">1</span><span class="p">,</span>
  <span class="n">CLAP_PARAM_SCALE_EXP</span>    <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/* This describes the parameter and provides the current value */</span>
<span class="k">struct</span> <span class="n">clap_param</span>
<span class="p">{</span>
  <span class="kt">int32_t</span> <span class="n">index</span><span class="p">;</span>  <span class="c1">// parameter's index
</span>
  <span class="cm">/* param info */</span>
  <span class="kt">char</span>                    <span class="n">module_id</span><span class="p">[</span><span class="n">CLAP_ID_SIZE</span><span class="p">];</span>
  <span class="kt">char</span>                    <span class="n">id</span><span class="p">[</span><span class="n">CLAP_ID_SIZE</span><span class="p">];</span> <span class="c1">// a string which identify the param
</span>  <span class="kt">char</span>                    <span class="n">name</span><span class="p">[</span><span class="n">CLAP_NAME_SIZE</span><span class="p">];</span> <span class="c1">// the display name
</span>  <span class="kt">char</span>                    <span class="n">desc</span><span class="p">[</span><span class="n">CLAP_DESC_SIZE</span><span class="p">];</span>
  <span class="kt">char</span>                    <span class="n">display</span><span class="p">[</span><span class="n">CLAP_DISPLAY_SIZE</span><span class="p">];</span> <span class="c1">// the text used to display the value
</span>  <span class="kt">bool</span>                    <span class="n">is_per_note</span><span class="p">;</span>
  <span class="kt">bool</span>                    <span class="n">is_per_channel</span><span class="p">;</span>
  <span class="kt">bool</span>                    <span class="n">is_used</span><span class="p">;</span>   <span class="c1">// is this parameter used by the patch?
</span>  <span class="kt">bool</span>                    <span class="n">is_periodic</span><span class="p">;</span> <span class="c1">// after the last value, go back to the first one
</span>  <span class="kt">bool</span>                    <span class="n">is_locked</span><span class="p">;</span> <span class="c1">// if true, the parameter can't be changed by
</span>                                     <span class="c1">// the host
</span>
  <span class="cm">/* Can the parameter be automated at sample rate by an audio buffer? */</span>
  <span class="kt">bool</span>                    <span class="n">supports_audio_automation</span><span class="p">;</span>

  <span class="cm">/* Can the parameter be automated by automation events? */</span>
  <span class="kt">bool</span>                    <span class="n">supports_events_automation</span><span class="p">;</span>
  <span class="kt">bool</span>                    <span class="n">supports_ramp_events</span><span class="p">;</span>

  <span class="cm">/* value */</span>
  <span class="k">enum</span> <span class="n">clap_param_type</span>    <span class="n">type</span><span class="p">;</span>
  <span class="k">union</span> <span class="n">clap_param_value</span>  <span class="n">value</span><span class="p">;</span> <span class="c1">// current value
</span>  <span class="k">union</span> <span class="n">clap_param_value</span>  <span class="n">min</span><span class="p">;</span>   <span class="c1">// minimum value
</span>  <span class="k">union</span> <span class="n">clap_param_value</span>  <span class="n">max</span><span class="p">;</span>   <span class="c1">// maximum value
</span>  <span class="k">union</span> <span class="n">clap_param_value</span>  <span class="n">deflt</span><span class="p">;</span> <span class="c1">// default value
</span>  <span class="k">enum</span>  <span class="n">clap_param_scale</span>  <span class="n">scale</span><span class="p">;</span> <span class="c1">// scaling of the knob in the UI.
</span><span class="p">};</span>

<span class="k">struct</span> <span class="n">clap_param_module</span>
<span class="p">{</span>
  <span class="kt">char</span> <span class="n">id</span><span class="p">[</span><span class="n">CLAP_ID_SIZE</span><span class="p">];</span>
  <span class="kt">char</span> <span class="n">parent_id</span><span class="p">[</span><span class="n">CLAP_ID_SIZE</span><span class="p">];</span>
  <span class="kt">char</span> <span class="n">name</span><span class="p">[</span><span class="n">CLAP_NAME_SIZE</span><span class="p">];</span>
  <span class="kt">char</span> <span class="n">desc</span><span class="p">[</span><span class="n">CLAP_DESC_SIZE</span><span class="p">];</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">clap_plugin_params</span>
<span class="p">{</span>
  <span class="cm">/* Returns the number of parameters.
   * [audio-thread] */</span>
  <span class="kt">int32_t</span> <span class="p">(</span><span class="o">*</span><span class="n">count</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>

  <span class="cm">/* Copies the parameter's info to param and returns true.
   * If index is greater or equal to the number then return false.
   * [audio-thread] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">get_param</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                    <span class="kt">int32_t</span>             <span class="n">index</span><span class="p">,</span>
                    <span class="k">struct</span> <span class="n">clap_param</span>  <span class="o">*</span><span class="n">param</span><span class="p">);</span>

  <span class="cm">/* Copies the module's info to module and returns true.
   * If module_id is NULL or invalid then return false.
   * [audio-thread] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">get_module</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span>       <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                     <span class="k">const</span> <span class="kt">char</span>               <span class="o">*</span><span class="n">module_id</span><span class="p">,</span>
                     <span class="k">struct</span> <span class="n">clap_param_module</span> <span class="o">*</span><span class="n">module</span><span class="p">);</span>

  <span class="cm">/* Use an audio buffer to automate a parameter at sample rate.
   * Once a parameter is automated by an audio buffer, concurrent
   * automation event shall be ignored in favor of the audio rate
   * automation.
   *
   * To disconnect the automation, set buffer to NULL.
   * [audio-thread] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">set_param_port</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span>     <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                         <span class="kt">int32_t</span>                 <span class="n">param_index</span><span class="p">,</span>
                         <span class="kt">int32_t</span>                 <span class="n">channel</span><span class="p">,</span>
                         <span class="kt">int32_t</span>                 <span class="n">note</span><span class="p">,</span>
                         <span class="k">struct</span> <span class="n">clap_audio_port</span> <span class="o">*</span><span class="n">port</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">clap_host_params</span>
<span class="p">{</span>
  <span class="cm">/* [thread-safe] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">touch_begin</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_host</span>   <span class="o">*</span><span class="n">host</span><span class="p">,</span>
                      <span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                      <span class="kt">int32_t</span>             <span class="n">index</span><span class="p">);</span>

  <span class="cm">/* [thread-safe] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">touch_end</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_host</span>     <span class="o">*</span><span class="n">host</span><span class="p">,</span>
                    <span class="k">struct</span> <span class="n">clap_plugin</span>   <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                    <span class="kt">int32_t</span>               <span class="n">index</span><span class="p">);</span>

  <span class="cm">/* [thread-safe] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">changed</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_host</span>       <span class="o">*</span><span class="n">host</span><span class="p">,</span>
                  <span class="k">struct</span> <span class="n">clap_plugin</span>     <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                  <span class="kt">int32_t</span>                 <span class="n">index</span><span class="p">,</span>
                  <span class="k">union</span> <span class="n">clap_param_value</span>  <span class="n">value</span><span class="p">,</span>
                  <span class="kt">bool</span>                    <span class="n">is_recordable</span><span class="p">);</span>

  <span class="cm">/* [thread-safe] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">rescan</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_host</span>   <span class="o">*</span><span class="n">host</span><span class="p">,</span>
                 <span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#ifdef __cplusplus
</span><span class="p">}</span>
<span class="cp">#endif
</span>
<span class="cp">#endif </span><span class="cm">/* !CLAP_EXT_PARAMS_H */</span>
</pre>
</div>
<div class="section" id="clap-ext-gui-h">
<h2><a class="toc-backref" href="#id46">clap/ext/gui.h</a></h2>
<pre class="code c literal-block">
<span class="cp">#ifndef CLAP_EXT_GUI_H
# define CLAP_EXT_GUI_H
</span>
<span class="cp"># include &quot;../clap.h&quot;
</span>
<span class="cp"># define CLAP_EXT_GUI &quot;clap/gui&quot;
</span>
<span class="k">struct</span> <span class="n">clap_plugin_gui</span>
<span class="p">{</span>
  <span class="cm">/* Open the GUI
   * [thread-safe] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">open</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>

  <span class="cm">/* [thread-safe] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">hide</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>

  <span class="cm">/* [thread-safe] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">close</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">clap_host_gui</span>
<span class="p">{</span>
  <span class="cm">/* [thread-safe] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">gui_opened</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_host</span>   <span class="o">*</span><span class="n">host</span><span class="p">,</span>
                     <span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>

  <span class="cm">/* [thread-safe] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">gui_hidden</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_host</span>   <span class="o">*</span><span class="n">host</span><span class="p">,</span>
                     <span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>

  <span class="cm">/* [thread-safe] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">gui_closed</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_host</span>   <span class="o">*</span><span class="n">host</span><span class="p">,</span>
                     <span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* !CLAP_EXT_GUI_H */</span>
</pre>
</div>
<div class="section" id="clap-ext-embed-h">
<h2><a class="toc-backref" href="#id47">clap/ext/embed.h</a></h2>
<pre class="code c literal-block">
<span class="cp">#ifndef CLAP_EXT_EMBED_H
# define CLAP_EXT_EMBED_H
</span>
<span class="cp"># include &quot;../clap.h&quot;
</span>
<span class="cp"># define CLAP_EXT_EMBED &quot;clap/embed&quot;
</span>
<span class="k">struct</span> <span class="n">clap_host_embed</span>
<span class="p">{</span>
  <span class="cm">/* Request the host to resize the client area to width, height.
   * Return true on success, false otherwise.
   * [thread-safe] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">resize</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_host</span> <span class="o">*</span><span class="n">host</span><span class="p">,</span> <span class="kt">int32_t</span> <span class="n">width</span><span class="p">,</span> <span class="kt">int32_t</span> <span class="n">height</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* !CLAP_EXT_EMBED_H */</span>
</pre>
</div>
<div class="section" id="clap-ext-embed-win32-h">
<h2><a class="toc-backref" href="#id48">clap/ext/embed-win32.h</a></h2>
<pre class="code c literal-block">
<span class="cp">#ifndef CLAP_EXT_EMBED_WIN32_H
# define CLAP_EXT_EMBED_WIN32_H
</span>
<span class="cp"># include &lt;windows.h&gt;
</span>
<span class="cp"># include &quot;../clap.h&quot;
# include &quot;embed.h&quot;
</span>
<span class="cp"># define CLAP_EXT_EMBED_WIN32 &quot;clap/embed/win32&quot;
</span>
<span class="k">struct</span> <span class="n">clap_plugin_embed_win32</span>
<span class="p">{</span>
  <span class="cm">/* Get the size of the plugin UI.
   * [thread-safe] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">get_size</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                   <span class="kt">int32_t</span>            <span class="o">*</span><span class="n">width</span><span class="p">,</span>
                   <span class="kt">int32_t</span>            <span class="o">*</span><span class="n">height</span><span class="p">);</span>

  <span class="cm">/* Attach the plugin UI.
   * [thread-safe] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">attach</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span> <span class="n">HWND</span> <span class="n">window</span><span class="p">);</span>

  <span class="cm">/* Detach the plugin UI.
   * [thread-safe] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">detach</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* !CLAP_EXT_EMBED_WIN32_H */</span>
</pre>
</div>
<div class="section" id="clap-ext-embed-x11-h">
<h2><a class="toc-backref" href="#id49">clap/ext/embed-x11.h</a></h2>
<pre class="code c literal-block">
<span class="cp">#ifndef CLAP_EXT_EMBED_X11_H
# define CLAP_EXT_EMBED_X11_H
</span>
<span class="cp"># include &quot;../clap.h&quot;
# include &quot;embed.h&quot;
</span>
<span class="cp"># define CLAP_EXT_EMBED_X11 &quot;clap/embed/x11&quot;
</span>
<span class="k">struct</span> <span class="n">clap_plugin_embed_x11</span>
<span class="p">{</span>
  <span class="cm">/* Get the size of the plugin UI.
   * [thread-safe] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">get_size</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                   <span class="kt">int32_t</span>            <span class="o">*</span><span class="n">width</span><span class="p">,</span>
                   <span class="kt">int32_t</span>            <span class="o">*</span><span class="n">height</span><span class="p">);</span>

  <span class="cm">/* Note for the client, you can get a Display* by calling
   * XOpenDisplay(display_name).
   *
   * Note for the host, the display_name can be retrieved from your own
   * display-&gt;display_name.
   *
   * [thread-safe] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">attach</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                 <span class="k">const</span> <span class="kt">char</span>         <span class="o">*</span><span class="n">display_name</span><span class="p">,</span>
                 <span class="kt">unsigned</span> <span class="kt">long</span>       <span class="n">window</span><span class="p">);</span>

  <span class="cm">/* Detach the plugin UI.
   * [thread-safe] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">detach</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* !CLAP_EMBED_XLIB_H */</span>
</pre>
</div>
<div class="section" id="clap-ext-embed-cocoa-h">
<h2><a class="toc-backref" href="#id50">clap/ext/embed-cocoa.h</a></h2>
<pre class="code c literal-block">
<span class="cp">#ifndef CLAP_EXT_EMBED_COCOA_H
# define CLAP_EXT_EMBED_COCOA_H
</span>
<span class="cp"># include &quot;../clap.h&quot;
# include &quot;embed.h&quot;
</span>
<span class="cp"># define CLAP_EXT_EMBED_COCOA &quot;clap/embed/cocoa&quot;
</span>
<span class="k">struct</span> <span class="n">clap_plugin_embed_cocoa</span>
<span class="p">{</span>
  <span class="cm">/* Get the size of the plugin UI.
   * [thread-safe] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">get_size</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                   <span class="kt">int32_t</span>            <span class="o">*</span><span class="n">width</span><span class="p">,</span>
                   <span class="kt">int32_t</span>            <span class="o">*</span><span class="n">height</span><span class="p">);</span>

  <span class="cm">/* Attach the plugin UI.
   * [thread-safe] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">attach</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                 <span class="kt">void</span>               <span class="o">*</span><span class="n">nsView</span><span class="p">);</span>

  <span class="cm">/* Detach the plugin UI.
   * [thread-safe] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">detach</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* !CLAP_EXT_EMBED_COCOA_H */</span>
</pre>
</div>
<div class="section" id="clap-ext-draft-locale-h">
<h2><a class="toc-backref" href="#id51">clap/ext/draft/locale.h</a></h2>
<pre class="code c literal-block">
<span class="cp">#ifndef CLAP_EXT_LOCALE_H
# define CLAP_EXT_LOCALE_H
</span>
<span class="cp"># include &quot;../../clap.h&quot;
</span>
<span class="cp"># define CLAP_EXT_LOCALE &quot;clap/locale&quot;
</span>
<span class="k">struct</span> <span class="n">clap_plugin_locale</span>
<span class="p">{</span>
  <span class="cm">/* Sets the locale to use.
   * [thread-safe] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">set_locale</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">locale</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* !CLAP_EXT_LOCALE_H */</span>
</pre>
</div>
<div class="section" id="clap-ext-draft-presets-h">
<h2><a class="toc-backref" href="#id52">clap/ext/draft/presets.h</a></h2>
<pre class="code c literal-block">
<span class="cp">#ifndef CLAP_EXT_PRESETS_H
# define CLAP_EXT_PRESETS_H
</span>
<span class="cp"># include &quot;../../clap.h&quot;
</span>
<span class="cp"># define CLAP_EXT_PRESETS &quot;clap/presets&quot;
</span>
<span class="cm">/* describes a single preset */</span>
<span class="k">struct</span> <span class="n">clap_preset_info</span>
<span class="p">{</span>
  <span class="kt">char</span>     <span class="n">plugin_id</span><span class="p">[</span><span class="n">CLAP_ID_SIZE</span><span class="p">];</span>    <span class="c1">// used to identify which plugin can load the preset
</span>  <span class="kt">char</span>     <span class="n">id</span><span class="p">[</span><span class="n">CLAP_ID_SIZE</span><span class="p">];</span>           <span class="c1">// used to identify a preset in a preset bank
</span>  <span class="kt">char</span>     <span class="n">name</span><span class="p">[</span><span class="n">CLAP_NAME_SIZE</span><span class="p">];</span>       <span class="c1">// preset name
</span>  <span class="kt">char</span>     <span class="n">desc</span><span class="p">[</span><span class="n">CLAP_DESC_SIZE</span><span class="p">];</span>       <span class="c1">// desc and how to use it
</span>  <span class="kt">char</span>     <span class="n">author</span><span class="p">[</span><span class="n">CLAP_NAME_SIZE</span><span class="p">];</span>     <span class="c1">// author's name
</span>  <span class="kt">char</span>     <span class="n">categories</span><span class="p">[</span><span class="n">CLAP_TAGS_SIZE</span><span class="p">];</span> <span class="c1">// &quot;cat1;cat2;cat3;...&quot;
</span>  <span class="kt">char</span>     <span class="n">tags</span><span class="p">[</span><span class="n">CLAP_TAGS_SIZE</span><span class="p">];</span>       <span class="c1">// &quot;tag1;tag2;tag3;...&quot;
</span>  <span class="kt">int8_t</span>   <span class="n">score</span><span class="p">;</span>                      <span class="c1">// 0 = garbage, ..., 100 = best, -1 = no score
</span><span class="p">};</span>

<span class="cm">/* Interface implemented by the plugin.
 * Used to create a preset library, get info about the current preset and
 * load a preset. */</span>
<span class="k">struct</span> <span class="n">clap_plugin_preset</span>
<span class="p">{</span>
  <span class="cm">/* Create a preset library for this plugin
   * [thread-safe] */</span>
  <span class="k">struct</span> <span class="n">clap_preset_library</span> <span class="o">*</span><span class="p">(</span><span class="o">*</span><span class="n">create_preset_library</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">);</span>

  <span class="cm">/* Get the current preset info
   * [thread-safe] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">get_current_preset_info</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span>      <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                                  <span class="k">struct</span> <span class="n">clap_preset_info</span> <span class="o">*</span><span class="n">preset</span><span class="p">);</span>

  <span class="cm">/* Load a preset from a bank file
   * [audio-thread] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">load_preset</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                      <span class="k">const</span> <span class="kt">char</span>         <span class="o">*</span><span class="n">path</span><span class="p">,</span>
                      <span class="k">const</span> <span class="kt">char</span>         <span class="o">*</span><span class="n">preset_id</span><span class="p">);</span>
<span class="p">};</span>

<span class="cm">/* opaque type */</span>
<span class="k">struct</span> <span class="n">clap_bank_handle</span><span class="p">;</span>

<span class="cm">/* The principle behind this extension is that the host gets a list of
 * directories to scan recursively, and then for each files, it can ask
 * the interface to load the preset.
 *
 * Every file are considered as preset bank, so they can contain between
 * 0 and many presets. */</span>
<span class="k">struct</span> <span class="n">clap_preset_library</span>
<span class="p">{</span>
  <span class="cm">/* The identifier of the preset library.
   * As one preset library might be able to parse the presets for
   * multiple different plugins, it is useful to identify a
   * preset library by an id and a version, so the DAW can use
   * the most recent version of every preset library which share
   * the same id, and scan only once. */</span>
  <span class="kt">char</span>    <span class="n">id</span><span class="p">[</span><span class="n">CLAP_ID_SIZE</span><span class="p">];</span>
  <span class="kt">int32_t</span> <span class="n">version</span><span class="p">;</span> <span class="c1">// version of the preset library
</span>
  <span class="cm">/* Copies at most *path_size bytes into path.
   * If directory_index is bigger than the number of directories,
   * then return false.
   * [thread-safe] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">get_directory</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_preset_library</span> <span class="o">*</span><span class="n">library</span><span class="p">,</span>
                        <span class="kt">int</span>                         <span class="n">directory_index</span><span class="p">,</span>
                        <span class="kt">char</span>                       <span class="o">*</span><span class="n">path</span><span class="p">,</span>
                        <span class="kt">int32_t</span>                    <span class="o">*</span><span class="n">path_size</span><span class="p">);</span>

  <span class="cm">/* [thread-safe] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">open_bank</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_preset_library</span>  <span class="o">*</span><span class="n">library</span><span class="p">,</span>
                    <span class="k">const</span> <span class="kt">char</span>                  <span class="o">*</span><span class="n">path</span><span class="p">,</span>
                    <span class="k">struct</span> <span class="n">clap_bank_handle</span>    <span class="o">**</span><span class="n">handle</span><span class="p">);</span>

  <span class="cm">/* [thread-safe] */</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">close_bank</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_preset_library</span> <span class="o">*</span><span class="n">library</span><span class="p">,</span>
                     <span class="k">struct</span> <span class="n">clap_bank_handle</span>    <span class="o">*</span><span class="n">handle</span><span class="p">);</span>

  <span class="cm">/* Returns the number of presets in the bank.
   * If it is not known, return -2.
   * On error return -1.
   * [thread-safe] */</span>
  <span class="kt">int32_t</span> <span class="p">(</span><span class="o">*</span><span class="n">get_bank_size</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_preset_library</span> <span class="o">*</span><span class="n">library</span><span class="p">,</span>
                           <span class="k">struct</span> <span class="n">clap_bank_handle</span>    <span class="o">*</span><span class="n">handle</span><span class="p">);</span>

  <span class="cm">/* Get a preset info from its path and returns true.
   * In case of a preset bank file, index is used, and *has_next
   * should be set to false when index reaches the last preset.
   * If the preset is not found, then it should return false.
   * [thread-safe] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">get_bank_preset</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_preset_library</span> <span class="o">*</span><span class="n">library</span><span class="p">,</span>
                          <span class="k">struct</span> <span class="n">clap_bank_handle</span>    <span class="o">*</span><span class="n">handle</span><span class="p">,</span>
                          <span class="k">struct</span> <span class="n">clap_preset_info</span>    <span class="o">*</span><span class="n">preset_info</span><span class="p">,</span>
                          <span class="kt">int32_t</span>                     <span class="n">index</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* !CLAP_EXT_PRESETS_H */</span>
</pre>
</div>
<div class="section" id="clap-ext-draft-drum-map-h">
<h2><a class="toc-backref" href="#id53">clap/ext/draft/drum-map.h</a></h2>
<pre class="code c literal-block">
<span class="cp">#ifndef CLAP_EXT_DRUM_MAP_H
# define CLAP_EXT_DRUM_MAP_H
</span>
<span class="cp"># include &quot;../../clap.h&quot;
</span>
<span class="cp"># define CLAP_EXT_DRUM_MAP &quot;clap/drum-map&quot;
</span>
<span class="k">struct</span> <span class="n">clap_drum_map_key_info</span>
<span class="p">{</span>
  <span class="kt">char</span>   <span class="n">name</span><span class="p">[</span><span class="n">CLAP_NAME_SIZE</span><span class="p">];</span>
  <span class="kt">int8_t</span> <span class="n">key</span><span class="p">;</span>
  <span class="kt">int8_t</span> <span class="n">channel</span><span class="p">;</span> <span class="c1">// -1 for every channels
</span><span class="p">};</span>

<span class="k">struct</span> <span class="n">clap_plugin_drum_map</span>
<span class="p">{</span>
  <span class="cm">/* Get the number of keys which have a drum map info on
   * the given port_id.
   * [thread-safe] */</span>
  <span class="kt">int32_t</span> <span class="p">(</span><span class="o">*</span><span class="n">get_key_count</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span> <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                           <span class="kt">int32_t</span>             <span class="n">port_id</span><span class="p">);</span>

  <span class="cm">/* Loads the info for the given event port and key index.
   * Returns true on success, false if the info could not be
   * loaded.
   * [thread-safe] */</span>
  <span class="kt">bool</span> <span class="p">(</span><span class="o">*</span><span class="n">get_key_info</span><span class="p">)(</span><span class="k">struct</span> <span class="n">clap_plugin</span>            <span class="o">*</span><span class="n">plugin</span><span class="p">,</span>
                       <span class="kt">int32_t</span>                        <span class="n">port_id</span><span class="p">,</span>
                       <span class="kt">int32_t</span>                        <span class="n">index</span><span class="p">,</span>
                       <span class="k">struct</span> <span class="n">clap_drum_map_key_info</span> <span class="o">*</span><span class="n">info</span><span class="p">);</span>
<span class="p">};</span>

<span class="cp">#endif </span><span class="cm">/* !DRUM_MAP_H */</span>
</pre>
</div>
</div>
</div>
</body>
</html>
